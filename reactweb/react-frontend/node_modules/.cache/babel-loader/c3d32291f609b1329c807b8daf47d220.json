{"ast":null,"code":"var _jsxFileName = \"C:\\\\faceloginproject\\\\flask-frontend_style\\\\src\\\\components\\\\FaceLogin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Webcam from 'react-webcam'; // registered member's face login\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FaceLogin = () => {\n  _s();\n\n  const [name, setName] = useState('');\n  const countRef = useRef(0);\n  const webcamRef = useRef(0);\n  const videoConstraints = {\n    width: 200,\n    height: 200,\n    facingMode: 'user'\n  };\n\n  const recogFace = () => {\n    setTimeout(() => {\n      countRef.current++;\n      console.log(countRef.current);\n      const imageSrc = webcamRef.current.getScreenshot();\n\n      if (imageSrc) {\n        axios.post('http://127.0.0.1:5000/api', {\n          data: imageSrc,\n          key: countRef.current\n        }).then(resp => {\n          console.log(`api resp: ${resp.data}`);\n\n          if (resp.data === 'unknown') {\n            setName('인식 중입니다');\n            recogFace();\n          } else {\n            console.log(`Found face: ${resp.data}`);\n            setName(resp.data);\n            axios.post('http://127.0.0.1:5000/getData', {\n              data: resp.data\n            }).then(resp => {\n              console.log('getData resp: ', resp.data);\n              axios.post('http://127.0.0.1:8080/react/resp', resp.data).then(resp => {\n                console.log('react resp: ', resp.data);\n                window.location.replace('http://127.0.0.1:8080/react/resp');\n              }).catch(error => {\n                console.log(error);\n              });\n            }).catch(error => {\n              console.log(error);\n            });\n          }\n        });\n      } else recogFace();\n    }, 100);\n  };\n\n  useEffect(() => {\n    recogFace();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Webcam, {\n      mirrored: true,\n      audio: false,\n      height: 300,\n      ref: webcamRef,\n      screenshotFormat: \"image/jpeg\",\n      width: 350,\n      videoConstraints: videoConstraints\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FaceLogin, \"tW5f4vCo6g6iJmheKonn3KGNKSk=\");\n\n_c = FaceLogin;\nexport default FaceLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"FaceLogin\");","map":{"version":3,"sources":["C:/faceloginproject/flask-frontend_style/src/components/FaceLogin.js"],"names":["React","useState","useEffect","useRef","axios","Webcam","FaceLogin","name","setName","countRef","webcamRef","videoConstraints","width","height","facingMode","recogFace","setTimeout","current","console","log","imageSrc","getScreenshot","post","data","key","then","resp","window","location","replace","catch","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Webcam from 'react-webcam';\n\n// registered member's face login\nconst FaceLogin = () => {\n  const [name, setName] = useState('');\n  const countRef = useRef(0);\n  const webcamRef = useRef(0);\n  const videoConstraints = {\n    width: 200,\n    height: 200,\n    facingMode: 'user',\n  };\n\n  const recogFace = () => {\n    setTimeout(() => {\n      countRef.current++;\n      console.log(countRef.current);\n      const imageSrc = webcamRef.current.getScreenshot();\n      if (imageSrc) {\n        axios\n          .post('http://127.0.0.1:5000/api', {\n            data: imageSrc,\n            key: countRef.current,\n          })\n          .then((resp) => {\n            console.log(`api resp: ${resp.data}`);\n            if (resp.data === 'unknown') {\n              setName('인식 중입니다');\n              recogFace();\n            } else {\n              console.log(`Found face: ${resp.data}`);\n              setName(resp.data);\n              axios\n                .post('http://127.0.0.1:5000/getData', {\n                  data: resp.data,\n                })\n                .then((resp) => {\n                  console.log('getData resp: ', resp.data);\n                  axios\n                    .post('http://127.0.0.1:8080/react/resp', resp.data)\n                    .then((resp) => {\n                      console.log('react resp: ', resp.data);\n                      window.location.replace('http://127.0.0.1:8080/react/resp');\n                    })\n                    .catch((error) => {\n                      console.log(error);\n                    });\n                })\n                .catch((error) => {\n                  console.log(error);\n                });\n            }\n          });\n      } else recogFace();\n    }, 100);\n  };\n  useEffect(() => {\n    recogFace();\n  }, []);\n\n  return (\n    <div>\n      <Webcam\n        mirrored={true}\n        audio={false}\n        height={300}\n        ref={webcamRef}\n        screenshotFormat=\"image/jpeg\"\n        width={350}\n        videoConstraints={videoConstraints}\n      />\n      <h2>{name}</h2>\n    </div>\n  );\n};\n\nexport default FaceLogin;\n"]},"metadata":{},"sourceType":"module"}